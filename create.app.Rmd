---
title: "Trust in Non-democracies"
author: "Jennifer Haskell"
date: "Thursday, January 15, 2015"
output: html_document
runtime: shiny
---

Put write up here

## Inputs and Outputs

```{r, echo=FALSE}
#Setup plus graph 
library(ggvis)
setwd("C:/Dropbox/Projects/Dissertation/WVS/trust.app")

```


You can embed Shiny inputs and outputs in your document. Outputs are automatically updated whenever inputs change.  This demonstrates how a standard R plot can be made interactive by wrapping it in the Shiny `renderPlot` function. The `selectInput` and `sliderInput` functions create the input widgets used to drive the plot.

```{r, echo=FALSE}
rm(list = ls())

library(shiny)
library(ggvis)

#input panel to create subset
inputPanel(
        selectInput("countryyr", label = "Choose a country:",choices = c("Algeria - 2014", "Azerbaijan - 2011/2012", "Armenia - 2011 ",  "Belarus - 2011", "China - 2012", "Palestine - 2013", "Iraq - 2013", "Kazakhstan - 2011", "Jordan - 2014", "Kuwait - 2013", "Libya - 2013", "Malaysia - 2011", "Morocco - 2011", "Nigeria - 2011", "Qatar - 2010", "Russia - 2011", "Rwanda - 2012", "Singapore - 2012", "Zimbabwe - 2011", "Egypt - 2012", "Uzbekistan - 2011", "Yemen - 2013"), selected = "Algeria - 2014"),
                ))

mainPanel(ggvis_output("trust_plot"))

shinyServer(function(input, output, session) {
        data.comp <- read.csv(file = "20141209_data_forapp.csv", stringsAsFactors = FALSE)
        datasetInput <- reactive({
                selection <- switch(input$countryyr,
                                   "Algeria - 2014" = "Algeria - 2014", "Azerbaijan - 2011/2012" = "Azerbaijan - 2011/2012", "Armenia - 2011 ",  "Belarus - 2011", "China - 2012", "Palestine - 2013", "Iraq - 2013", "Kazakhstan - 2011", "Jordan - 2014", "Kuwait - 2013", "Libya - 2013", "Malaysia - 2011", "Morocco - 2011", "Nigeria - 2011", "Qatar - 2010", "Russia - 2011", "Rwanda - 2012", "Singapore - 2012", "Zimbabwe - 2011", "Egypt - 2012", "Uzbekistan - 2011", "Yemen - 2013")
                subset(dataset, countryyr == selection)                    
        })
        gv <- reactive( {
                
                ggvis(datasetInput(),
                      props(x = ~age, y = ~conf_gov, stroke = ~category)  %>% layer_lines())
                
        })
        
}
        )

#example http://stackoverflow.com/questions/22312767/shiny-ggvis-reactivity-to-subset-plot-data


```

## Embedded Application

It's also possible to embed an entire Shiny application within an R Markdown document using the `shinyAppDir` function. This example embeds a Shiny application located in another directory:





